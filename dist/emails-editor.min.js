!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ReactInputMask=t()}(this,(function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;function i(e){return t.test(e)}!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}('.emails-editor { background: white; white-space: nowrap; display: flex; flex-wrap: wrap; align-content: flex-start; font-size: 14px; line-height: 24px; padding: 7px 8px 3px; cursor: text; overflow: hidden; }\n.emails-editor__email { position: relative; margin-right: 6px; max-width: 100%; box-sizing: border-box; margin-bottom: 3px; height: 24px; cursor: default; }\n.emails-editor__email-btn-remove { padding-left: 6px; cursor: pointer; font-weight: 300; }\n.emails-editor__email-btn-remove::after { content: "Ã—"; }\n.emails-editor__email--valid { background-color: rgba(102, 152, 255, 0.2); border-radius: 12px; padding-left: 10px; padding-right: 7px; margin-right: 8px; }\n.emails-editor__email--invalid { padding-right: 3px; }\n.emails-editor__email--invalid::after { content: ""; display: block; position: absolute; left: 0; right: 3px; bottom: 0; border-bottom: 1px dashed #d14836; }\n.emails-editor__input { flex-grow: 1; max-width: 100%; font: inherit; height: 24px; margin-bottom: 3px; }\n.emails-editor__width-calculator { white-space: nowrap; font: inherit; position: absolute; visibility: hidden; top: 0; left: 0; }');return function(t,a){var n=this,l=void 0===a?{}:a,o=l.className,r=void 0===o?"":o,d=l.placeholder,s=void 0===d?"":d,u=l.addMorePlaceholder,c=void 0===u?"":u,m=l.emails,p=void 0===m?[]:m,h=l.onChange;e(this,"createEmailBlock",(function(e){var t=(""+e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=["emails-editor__email",i(e)?"emails-editor__email--valid":"emails-editor__email--invalid"].join(" "),l=document.createElement("span");return l.className=a,l.innerHTML=t+'<span class="emails-editor__email-btn-remove"></span>',l.querySelector(".emails-editor__email-btn-remove").addEventListener("click",(function(){var e,t=(e=n.container.querySelectorAll(".emails-editor__email"),Array.prototype.slice.call(e)).indexOf(l);n.removeEmailAtIndex(t)})),l})),e(this,"addEmail",(function(e){n.emails=[].concat(n.emails,[e]);var t=n.createEmailBlock(e);n.container.insertBefore(t,n.input),n.adjustInputPlaceholder(),n.adjustInputWidth(),n.onChange&&n.onChange(n.getEmails())})),e(this,"removeEmailAtIndex",(function(e){n.emails=[].concat(n.emails.slice(0,e),n.emails.slice(e+1));var t=n.container.children[e];n.container.removeChild(t),n.adjustInputPlaceholder(),n.adjustInputWidth(),n.onChange&&n.onChange(n.getEmails())})),e(this,"resetEmails",(function(){for(;n.emails.length;)n.removeEmailAtIndex(n.emails.length-1)})),e(this,"getEmails",(function(){return n.emails.map((function(e){return{value:e,valid:i(e)}}))})),e(this,"setEmails",(function(e){n.resetEmails(),e.forEach(n.addEmail)})),e(this,"adjustInputPlaceholder",(function(){var e=n.placeholder,t=n.addMorePlaceholder;n.emails.length?n.input.placeholder=t:n.input.placeholder=e})),e(this,"adjustInputWidth",(function(){var e=n.input,t=e.placeholder,i=e.value;n.widthCalculator.innerText=i;var a=n.widthCalculator.getBoundingClientRect().width;n.widthCalculator.innerText=t;var l=n.widthCalculator.getBoundingClientRect().width,o=Math.max(a,l);n.input.style.width=o+"px"})),e(this,"onKeyDown",(function(e){if("Enter"===e.key)n.input.value.trim()&&(n.addEmail(n.input.value),n.input.value="",n.adjustInputWidth());else if("Backspace"===e.key){var t=n.input.selectionEnd>0,i=n.emails.length>0;if(t||!i)return;n.removeEmailAtIndex(n.emails.length-1)}})),e(this,"onInput",(function(){/[\s,]/.test(n.input.value)&&(n.input.value.replace(/[\s,]+/," ").trim().split(" ").filter((function(e){return!!e.trim()})).forEach(n.addEmail),n.input.value="");n.adjustInputWidth()})),e(this,"onBlur",(function(){n.input.value.trim()&&(n.addEmail(n.input.value),n.input.value="",n.adjustInputWidth())})),e(this,"onContainerClick",(function(){n.input.focus()}));var f=document.createElement("input");f.className="emails-editor__input",f.inputMode="email",f.addEventListener("input",this.onInput),f.addEventListener("keydown",this.onKeyDown),f.addEventListener("blur",this.onBlur);var v=document.createElement("div");v.className="emails-editor__width-calculator";var g=document.createElement("div");g.className="emails-editor "+r,g.appendChild(f),g.appendChild(v),g.addEventListener("click",this.onContainerClick),this.input=f,this.widthCalculator=v,this.container=g,this.emails=[],this.placeholder=s,this.addMorePlaceholder=c,this.onChange=h,this.adjustInputPlaceholder(),p.forEach(this.addEmail),t.appendChild(g)}}));
